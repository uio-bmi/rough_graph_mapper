#!/usr/bin/env bash


join $1 $2 | awk -F' ' '$14=substr($14,6)' | awk -F' ' '$28=substr($28,6)' | awk -F' ' '{ if ($5 < $19 && $14 >= $28) $19=$5 } { print $0 }' | awk -F ' ' '{if ($14 > $28) print $1, $16, $3, $4, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29; else print $1, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29; }'
